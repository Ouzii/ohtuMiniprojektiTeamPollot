language: java
sudo: required
env: DISPLAY=':99.0'
addons:
  chrome: stable
before_install:
  - gradle run &
  - sleep 10
  - google-chrome-stable --headless --disable-gpu --remote-debugging-port=9222 http://localhost:8080 &
install:
  - wget -N http://chromedriver.storage.googleapis.com/2.30/chromedriver_linux64.zip -P ~/
  - unzip ~/chromedriver_linux64.zip -d ~/
  - rm ~/chromedriver_linux64.zip
  - sudo mv -f ~/chromedriver /usr/local/share/
  - sudo chmod +x /usr/local/share/chromedriver
  - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3  
  - sleep 10
script:
  - gradle check
  - whereis google-chrome-stable
  - whereis chromedriver
notifications:
  email: false

branches:
  only:
  - development

branches:
  except:
  - master

after_success:
  - "curl -o /tmp/travis-automerge https://raw.githubusercontent.com/cdown/travis-automerge/master/travis-automerge"
  - "chmod a+x /tmp/travis-automerge"
  - "BRANCHES_TO_MERGE_REGEX='^development' BRANCH_TO_MERGE_INTO=master GITHUB_REPO=Ouzii/ohtuMiniprojektiTeamPollot /tmp/travis-automerge"

env:
  global:
      secure: "j7l5U5fCPEVRhvuWaKeL6sA9RIUO/WumjBdoAYSC5DWbzF/zURMI8bX4a+J59bQOjr59/5KQ9D3rEKyz41f7H1tgRPuzozKXvw6+rl5jH0WtvpGxQ1uYlMJ712c5VlkoazR5hX14kQ5pIqgyoK7/mzEJ/obj4qYyLpJb2o88dxQE8KIn9gbmwmeFOBHRipHuBYz79Nw4kwYd6VDwT0vFIUXy4IY78nID5uICdXezn9jDfN6LXcznlDdyNWm3tMLqz6xYCP5TTPn6Hxt/iSw9J919accorJ1aYmHWX3uKiQla3CVxpuLp2ToGYQf5qNQ9uHqQGfxoD2Sy7Y3vV2lCx3aKmKVIWwSUQgIqXiPJYwBjj8c3ptxWvSE4SgK1C/oZrzaQB20rlEfa+3bJsu8ic+O9Ap3+EiHFcVrAhdhYJfVRBM6issuxGxcuhFu53GstpynJDREEyRf5a3zc2D/Mn8Ap/NOg2XlG0tj/VWYE7WAT4LtRvaUM+RTPNYTsPpy1pc7gNmDJKkViVPQPnCO5W+MNWRBocyYTyh1VpyOUZub6pHnGZPkyzo76fxwDJ2R3dIBHgISSK1IVVVhcmAASSVTjawwL5Lc73s1DJNMuR31MD4aWJEuqhbrHNwsRAohIphV7qM9KpU8C5Bl0HafHmeSj4MHY7ad8Cn8tygNe1xQ="